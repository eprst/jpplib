<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project basedir="." default="create-jpplib-zips">
	<!-- Import the Eclipse-generated build file 
	     for JUnit path, build target, etc -->
	<import file="build.xml"/>
	<property name="jpplib.version" value="0.2"/>
	<property name="jpplib.jarfile" value="jpplib-${jpplib.version}.jar"/>
	<target name="create-jpplib-zips"
		depends="create-jpplib-bin-zip,create-jpplib-src-zip"/>
	<target name="create-jpplib-bin-zip"
		depends="create-jpplib-jar,create-javadocs">
		<zip destfile="jpplib-bin-${jpplib.version}.zip" update="false">
			<zipfileset dir="." prefix="jpplib-bin-${jpplib.version}">
				<include name="api/"/>
				<include name="demo/"/>
				<include name="LICENSE"/>
				<include name="README"/>
				<include name="${jpplib.jarfile}"/>
			</zipfileset>
		</zip>
	</target>
	<target name="create-jpplib-src-zip">
		<zip destfile="jpplib-src-${jpplib.version}.zip" update="false">
			<zipfileset dir="." prefix="jpplib-src-${jpplib.version}">
				<include name="src/"/>
				<include name="demo/"/>
				<include name=".project"/>
				<include name=".classpath"/>
				<include name="build.xml"/>
				<include name="build-distro.xml"/>
				<include name="LICENSE"/>
				<include name="README"/>
				<include name="README-devel"/>
			</zipfileset>
		</zip>
	</target>
   	<target name="create-javadocs">
    	<delete dir="api"/>
   		<javadoc destdir="api"
				 classpathref="JUnit 3.8.1.libraryclasspath"
   			     use="true">
   			<fileset dir="src" id="id">
    			<exclude name="**/TestLayouter.java"/>
    			<exclude name="**/package.html"/>
			</fileset>
   			<header><![CDATA[<h1>Java Pretty Printer Library v${jpplib.version}</h1>]]></header>
   		</javadoc>
    </target>
	<target name="create-jpplib-jar" depends="build">
		<jar destfile="${jpplib.jarfile}" update="false"
			basedir="bin" 
			includes="de/**"
			excludes="**/Test*"/>
	</target>
</project>
